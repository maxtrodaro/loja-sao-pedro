!(function (e) {
    "use strict";
    var o = "#corebiz-vtex-login-bg, #corebiz-vtex-login-modal",
        n = function (e, o, i, n, t) {
            if (e && o && i && n && t) {
                e = (e + "").replace(",", "").replace(" ", "");
                var a = isFinite(+e) ? +e : 0,
                    r = isFinite(+o) ? Math.abs(o) : 0,
                    s = void 0 === n ? "," : n,
                    l = void 0 === i ? "." : i,
                    c = "";
                return (
                    (c = (r
                        ? (function (e, o) {
                              var i = Math.pow(10, o);
                              return "" + Math.round(e * i) / i;
                          })(a, r)
                        : "" + Math.round(a)
                    ).split("."))[0].length > 3 && (c[0] = c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, s)),
                    (c[1] || "").length < r && ((c[1] = c[1] || ""), (c[1] += new Array(r - c[1].length + 1).join("0"))),
                    t + " " + c.join(l)
                );
            }
        },
        t = function (e) {
            if (e) {
                var o = new Date(e),
                    i = "" + o.getFullYear(),
                    n = "" + (o.getMonth() + 1);
                1 == n.length && (n = "0" + n);
                var t = "" + o.getDate();
                1 == t.length && (t = "0" + t);
                var a = "" + o.getHours();
                1 == a.length && (a = "0" + a);
                var r = "" + o.getMinutes();
                1 == r.length && (r = "0" + r);
                var s = "" + o.getSeconds();
                return 1 == s.length && (s = "0" + s), t + "/" + n + "/" + i;
            }
        },
        a = function (o, i) {
            return (
                o &&
                    (e("#corebiz-vtex-login-bg, #corebiz-vtex-login-modal").find("form").removeClass("front-default"),
                    e("#corebiz-vtex-login-bg, #corebiz-vtex-login-modal").find("div").removeClass("front-default"),
                    e(o).addClass("front-default").find("input[name=type]").val(i)),
                null
            );
        },
        r = function (o) {
            if (!o) return !1;
            e("#corebiz-vtex-login-modal").append(o);
        },
        s = function (e) {
            return !!/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e) || void 0;
        },
        l = function (o, i, n, t) {
            var a = "function" == typeof n;
            return (
                e.ajax({
                    url: "https://vtexid.vtex.com.br/api/vtexid" + o,
                    data: i,
                    type: t || "GET",
                    dataType: "json",
                    async: !1,
                    success: function (e) {
                        a && n(e);
                    },
                    error: function (e) {
                        a && n(!1, e);
                    },
                }),
                null
            );
        },
        c = function (e) {
            return (window.location.href = e), null;
        },
        d = function (e, o, i) {
            if (!e || !o) return !1;
            document.cookie = e + "=" + o + ";expire=" + i + ";path=/;";
        },
        u = function (e) {
            return JSON.parse('{"' + decodeURI(e).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}');
        },
        p = {
            html: '<div class="corebiz-login-message"></div>',
            insert: function (o, i) {
                return (
                    this.clear(),
                    setTimeout(function () {
                        i ? e(o).insertAfter(e(i + " > .heading")) : e(o).insertAfter(e(".front-default > .heading"));
                    }, 1e3),
                    null
                );
            },
            success: function (o, i) {
                return o && this.insert(e(this.html).addClass("corebiz-login-message--success").html(o), i), null;
            },
            warning: function (o, i) {
                return o && this.insert(e(this.html).addClass("corebiz-login-message--warning").html(o), i), null;
            },
            error: function (o, i) {
                return o && this.insert(e(this.html).addClass("corebiz-login-message--error").html(o), i), null;
            },
            clear: function () {
                e(".front-default > .corebiz-login-message").remove();
            },
        },
        f = {
            html: function () {
                return '<div id="corebiz-vtex-login-bg"></div><div id="corebiz-vtex-login-modal"><div class="heading-logo">Logo</div><a id="corebiz-vtex-login-form--close" href="#"><i class="ico-close"></i></a></div>';
            },
            closeModal: function () {
                return e(o).fadeOut(250), e("body").removeClass("modal-open"), null;
            },
            openModal: function () {
                return e(o).fadeIn(250), e("body").addClass("modal-open"), null;
            },
            events: function () {
                return (
                    e("body").on(
                        "click",
                        "#corebiz-vtex-login-form--close, #corebiz-vtex-login-bg",
                        function () {
                            this.closeModal();
                        }.bind(this)
                    ),
                    e("body").on(
                        "click",
                        "#corebiz-vtex-login-form--open",
                        function () {
                            this.openModal();
                        }.bind(this)
                    ),
                    null
                );
            },
            init: function (o) {
                return this.events(), !e("#corebiz-vtex-login-modal").length && o.active && e("body").append(this.html), null;
            },
        },
        m = {
            selectorForm: "#corebiz-login-form-login",
            html:
                '<form action="#" id="corebiz-login-form-login" class="corebiz-vtex-login-form corebiz-login-form front-default"><div class="heading">OlÃ¡, tudo bem?</div><div class="left form-geral"><label for="email">Email:</label><br /><input type="text" class="email_client" name="email" placeholder="Digite seu email" required /> <br /><label for="password">Digite a Senha</label> <br /><div class="password-field"><input type="password" id="password-cabral" name="corebiz-vtex-login-form-password" placeholder="Senha" required /><span toggle="#password-field" class="fa fa-fw fa-eye field-icon toggle-password"></span></div><input type="submit" value="Entrar" /><br /><div><a class="form-show" href="#corebiz-login-form-forget-password">NÃ£o tenho senha</a> - <a class="form-show" href="#corebiz-login-form-forget-password">Esqueci Minha Senha</a> - <a class="form-show" href="#corebiz-login-form-new-register"> Fazer Cadastro</a></div></div><div class="right social-geral"><div class="connect">Entre com seu</div><a href="" class="facebook btn-facebook btn-social">facebook</a> <br />\x3c!--<a href="" class="twitter"><span class="fontawesome-twitter"></span></a> <br />--\x3e<a href="" class="google-plus btn-google-plus btn-social">gmail</a><br /><div class="connect">VisÃ£o rapida</div><a href="#corebiz-login-meus-pedidos" class="twitter form-show btn-veja-seu-pedido">Veja seu pedido</a> <br /></div></form>',
            isLogged: !1,
            initialParams: { callbackUrl: window.location.protocol + "//" + window.location.host + "/api/vtexid/pub/authentication/finish", scope: null, user: null, locale: "pt-BR" },
            getAuthenticationToken: function (e) {
                return (
                    (this.initialParams.scope = e.scope),
                    l("/pub/authentication/start", this.initialParams, function (o) {
                        (window.authenticationToken = o.authenticationToken), (window.redirectAfterUserLoggin = e.redirectAfterUserLoggin), (window.reloadAfterUserLoggin = e.reloadAfterUserLoggin);
                    }),
                    null
                );
            },
            authenticateLogin: function (e, o) {
                var i = this,
                    n = "function" == typeof o;
                return (
                    x.showLoading(),
                    l(
                        "/pub/authentication/classic/validate?login=" + e.login + "&authenticationToken=" + e.authenticationToken + "&password=" + e.password + "&_=1467835665242",
                        e,
                        function (e) {
                            n ? i.successData(e, o) : i.successData(e);
                        },
                        "POST"
                    ),
                    null
                );
            },
            authenticateUser: function (e, o) {
                for (var i = 0, n = e.length; i < n; i++) {
                    var t = e[i];
                    t && d(t.Name, t.Value, "." + location.hostname.split(".").reverse()[1] + "." + location.hostname.split(".").reverse()[0], o);
                }
                return null;
            },
            verifyLogin: function (e) {
                try {
                    vtexjs.checkout.getOrderForm().done(function (o) {
                        o.loggedIn ? e(!0) : e(!1);
                    });
                } catch (e) {
                    console.error(e);
                }
                return null;
            },
            successData: function (e, o) {
                var i = "function" == typeof o;
                return (
                    "Success" == e.authStatus
                        ? e.authCookie &&
                          e.accountAuthCookie &&
                          (this.authenticateUser([e.authCookie, e.accountAuthCookie], e.expiresIn),
                          null === window.redirectAfterUserLoggin || window.reloadAfterUserLoggin ? window.location.reload() : c(window.redirectAfterUserLoggin),
                          i && o(!0))
                        : "BlockedUser" == e.authStatus
                        ? (p.warning("VocÃª errou sua senha 4 vezes. Seu usuÃ¡rio foi bloqueado por uma hora"), i && o(!1, "BlockedUser", "VocÃª errou sua senha 4 vezes. Seu usuÃ¡rio foi bloqueado por uma hora"))
                        : (p.error("Usuario nÃ£o encontrado, email ou senha invÃ¡lidos!"), i && o(!1, "InvaidUser", "Usuario nÃ£o encontrado ou senha invÃ¡lida!")),
                    x.hideLoading(),
                    null
                );
            },
            events: function () {
                var o = this;
                return (
                    e("body").on("submit", this.selectorForm, function (i) {
                        i.preventDefault();
                        var n = e(this).find("input[type=password]");
                        if (!n.val()) return p.warning("Por favor digite sua senha!"), n.addClass("error-invalid"), !1;
                        var t = e(this).find("input[name=email]"),
                            a = t.val();
                        return a
                            ? s(a)
                                ? (console.log(t),
                                  void e.ajax({
                                      url: "/api/dataentities/CL/search?_where=email=" + a + "&_fields=email",
                                      type: "GET",
                                      headers: { accept: "application/vnd.vtex.ds.v10+json", contentType: "application/json; charset=utf-8" },
                                      success: function (e) {
                                          console.log(e);
                                          var i = { login: e[0].email, authenticationToken: encodeURIComponent(window.authenticationToken), password: n.val() };
                                          o.auth(i);
                                      },
                                      error: function (e) {
                                          console.log(e), p.warning("Seu acesso nÃ£o estÃ¡ liberado.");
                                      },
                                  }))
                                : (p.warning("Email invalido!"), t.addClass("error-invalid"), !1)
                            : (p.warning("Por favor digite seu email!"), t.addClass("error-invalid"), !1);
                    }),
                    e("body").on("focus", "#corebiz-vtex-login-modal form input", function () {
                        e(this).removeClass("error-invalid");
                    }),
                    null
                );
            },
            auth: function (e, o) {
                if (e) return "function" == typeof o ? this.authenticateLogin(e, o) : this.authenticateLogin(e), null;
            },
            init: function (o) {
                return (
                    r(this.html),
                    a("form#corebiz-login-form-login"),
                    e(".toggle-password").click(function () {
                        e(this).toggleClass("fa-eye fa-eye-slash"),
                            "password" == e(".password-field input").attr("type") ? document.getElementById("password-cabral").setAttribute("type", "text") : document.getElementById("password-cabral").setAttribute("type", "password");
                    }),
                    this.getAuthenticationToken(o),
                    this.events(),
                    null
                );
            },
        },
        v = {
            checkOAuth: function () {
                var o = this;
                return (
                    e(".social-geral a.btn-social").click(function (i) {
                        i.preventDefault();
                        var n = "";
                        return e(this).attr("class").indexOf("btn-facebook") > -1 ? (n = "Facebook") : e(this).attr("class").indexOf("btn-google-plus") > -1 && (n = "Google"), o.setOauth(n), !1;
                    }),
                    null
                );
            },
            setOauth: function (e) {
                var o = this,
                    i = setInterval(function () {
                        if (window.authenticationToken) {
                            clearInterval(i);
                            var n = o.getOAuthUrl();
                            (n += "?authenticationToken=" + encodeURIComponent(window.authenticationToken).replace(/ /g, "+")),
                                window.email && (n += "&userEmail=" + encodeURIComponent(window.email).replace(/ /g, "+")),
                                (n += "&providerName=" + encodeURIComponent(e)),
                                window.open(n, "Authenticate", "width=800,height=600,scrollbars=yes"),
                                o.openPopUp(n);
                        }
                    }, 1e3);
                return null;
            },
            getOAuthUrl: function () {
                return "https://vtexid.vtex.com.br/api/vtexid/pub/authentication/oauth/redirect";
            },
            openPopUp: function (e) {
                var o = window.open(e, "Authenticate", "width=800,height=600,scrollbars=yes");
                return this.checkReturnOAuth(o), null;
            },
            checkReturnOAuth: function (e) {
                var o = this,
                    i = window.setInterval(function () {
                        try {
                            if (-1 != e.location.href.indexOf(window.location.host)) {
                                window.clearInterval(i);
                                var n = u(e.location.search.substring(1));
                                "Success" == n.authStatus && (o.validateSocialOAuth(n), e.close());
                            }
                        } catch (e) {}
                    }, 50);
                return null;
            },
            redirectLoginPage: function () {
                if (location.search.indexOf("?ReturnUrl=") > -1) {
                    var e = decodeURIComponent(location.search.split("?ReturnUrl=")[1]);
                    c(location.protocol + "//" + location.host + e);
                } else null !== window.urlRedirect && void 0 !== window.urlRedirect && "" !== window.urlRedirect ? c(window.urlRedirect) : c(window.redirectAfterUserLoggin);
                return null;
            },
            validateSocialOAuth: function (o) {
                return (
                    (window.authenticationToken = o.authenticationToken ? o.authenticationToken.split("#")[0] : window.authenticationToken),
                    "Success" == o.authStatus
                        ? (d(decodeURIComponent(o.authCookieName), decodeURIComponent(o.authCookieValue), "." + location.hostname.split(".").reverse()[1] + "." + location.hostname.split(".").reverse()[0], o.expiresIn),
                          d(decodeURIComponent(o.accountAuthCookieName), decodeURIComponent(o.accountAuthCookieValue), "." + location.hostname.split(".").reverse()[1] + "." + location.hostname.split(".").reverse()[0], o.expiresIn),
                          f.closeModal(),
                          e(window).trigger("loggedBySocialOAuth.vtexid"),
                          e(window).trigger("logged.vtexid"),
                          this.redirectLoginPage())
                        : "Pending" == o.authStatus || "WrongCredentials" == o.authStatus || o.authStatus,
                    null
                );
            },
            init: function () {
                return this.checkOAuth(), null;
            },
        },
        h = {
            selectorForm: "#corebiz-login-form-forget-password",
            html:
                '<form action="#" id="corebiz-login-form-forget-password" class="corebiz-vtex-login-form corebiz-login-form"><div class="heading">NÃ£o sei a senha</div><div class="left form-geral"><label for="email">E-mail</label><input type="email" name="email" placeholder="Digite seu email" required /> <br /><a href="#corebiz-login-form-login" class="form-show btn_back_login">Voltar</a><input type="submit" value="Enviar SolicitaÃ§Ã£o" /></div><div class="right social-geral"><div class="connect">Entre com seu</div><a href="#corebiz-login-form-login" class="email-senha form-show">Email e senha</a> <br /></div></form>',
            sendAccessKey: function (e, o) {
                return (
                    l(
                        "/pub/authentication/accesskey/send",
                        e,
                        function (e) {
                            o(e);
                        },
                        "POST"
                    ),
                    null
                );
            },
            callbackSendAccessKey: function () {
                return x.hideLoading(), a("#corebiz-login-form-code-confirmation", "code-confirmation-create-account-password-new"), null;
            },
            events: function () {
                var o = this;
                return (
                    e("body").on("submit", this.selectorForm, function (i) {
                        var n = e(this).find("input[type=email]");
                        return n.val()
                            ? s(n.val())
                                ? ((window.email = n.val()),
                                  x.showLoading(),
                                  o.sendAccessKey({ email: n.val(), authenticationToken: encodeURIComponent(window.authenticationToken) }, o.callbackSendAccessKey),
                                  i.preventDefault(),
                                  void e(".send-email").text(n.val()))
                                : (p.warning("Email invalido!"), n.addClass("error-invalid"), !1)
                            : (p.warning("Por favor digite seu email!"), n.addClass("error-invalid"), !1);
                    }),
                    null
                );
            },
            init: function () {
                return this.events(), r(this.html), null;
            },
        },
        g = {
            selectorForm: "#corebiz-login-form-code-confirmation",
            html:
                '<form action="#" id="corebiz-login-form-code-confirmation" class="corebiz-vtex-login-form corebiz-login-form"><input type="hidden" value="" name="type" classe="type" /><div class="heading">Digite o codigo</div><div class="left form-geral"><label for="email">Digite o codigo</label> <br /><input type="text" name="code" placeholder="Digite o codigo" required /> <br /><input type="submit" value="Validar" /></div><div class="right social-geral"><div class="connect">Entre com seu</div><a href="#corebiz-login-form-login" class="email-senha form-show">Email e senha</a> <br /></div></form>',
            events: function () {
                var o = this;
                return (
                    e("body").on("submit", this.selectorForm, function (i) {
                        i.preventDefault();
                        var n = e(this).find("input[name=code]"),
                            t = e(this).find("input[name=type]");
                        if (!n.val()) return p.warning("Por favor digite seu codigo!"), !1;
                        "code-confirmation-create-account-password-new" === t.val()
                            ? ((window.accesskey = n.val()), a("#corebiz-login-form-password-new"), x.hideLoading())
                            : o.authenticateByAccessKey({ login: window.email, accesskey: n.val(), authenticationToken: encodeURIComponent(window.authenticationToken) }, function (e) {
                                  "Success" == e.authStatus
                                      ? "lost-password" === t.val()
                                          ? (x.showLoading(), a("#corebiz-login-form-password-new"), x.hideLoading())
                                          : "create-account" === t.val() && x.hideLoading()
                                      : p.error("Seu codigo de confirmaÃ§Ã£o estÃ¡ invÃ¡lido, por favor tende novamente!");
                              });
                    }),
                    null
                );
            },
            authenticateByAccessKey: function (e, o) {
                return (
                    l("/pub/authentication/accesskey/validate", e, function (e) {
                        o(e);
                    }),
                    null
                );
            },
            init: function () {
                return this.events(), r(this.html), p.warning("Um cÃ³digo de confirmaÃ§Ã£o foi enviado para sua caixa de email. <br />(<span class='send-email'></span>)", this.selectorForm), null;
            },
        },
        b = {
            selectorForm: "#corebiz-login-form-password-new",
            html:
                '<form action="#" id="corebiz-login-form-password-new" class="corebiz-vtex-login-form corebiz-login-form"><div class="heading">Cadastrar a senha</div><div class="left form-geral"><label for="password">Senha</label> <br /><input type="password" name="pass" placeholder="Digite sua senha" required /> <br /><label for="password">Confirmar a senha</label> <br /><input type="password" name="pass_conf" placeholder="Digite sua senha" required /> <br /><input type="submit" value="Confirmar" /><p><b style="color: red">AtenÃ§Ã£o:</b> Sua senha deve ter no mÃ­nimo <b>8 caracteres</b>, <b>1 nÃºmero</b>, <b>1 letra minÃºscula</b> e <b>1 letra maiÃºscula.</b></p></div><div class="right social-geral"><div class="connect">Entre com seu</div><a href="#corebiz-login-form-login" class="email-senha form-show">Email e senha</a> <br /></div></form>',
            changePswd: function (o) {
                var i = this;
                return (
                    l(
                        "/pub/authentication/classic/setpassword",
                        o,
                        function (o) {
                            if ("Success" == o.authStatus) {
                                var n = o.userId,
                                    t = {};
                                t.email = e("#corebiz-login-form-new-register").find("input[name=email]").val();
                                var r = e("#corebiz-login-form-new-register").find("select[name=uf]").val();
                                (t.priceTables = "GO" == r ? "Goias" : "Outro"), (t.userId = n);
                                var s = {};
                                (s.userId = e("#corebiz-login-form-new-register").find("input[name=email]").val()),
                                    (s.country = "BRA"),
                                    (s.addressName = "CASA"),
                                    (s.postalCode = e("#corebiz-login-form-new-register")
                                        .find("input[name=cep]")
                                        .val()
                                        .replace(/[^0-9]/, "")),
                                    (s.street = e("#corebiz-login-form-new-register").find("input[name=address]").val()),
                                    (s.number = e("#corebiz-login-form-new-register").find("input[name=number_address]").val()),
                                    (s.neighborhood = e("#corebiz-login-form-new-register").find("input[name=neighborhood]").val()),
                                    (s.city = e("#corebiz-login-form-new-register").find("input[name=city]").val()),
                                    (s.state = r),
                                    e.ajax({
                                        accept: "application/vnd.vtex.ds.v10+json",
                                        contentType: "application/json; charset=utf-8",
                                        crossDomain: !0,
                                        data: JSON.stringify(t),
                                        type: "PATCH",
                                        url: "/api/dataentities/CL/documents",
                                        success: function (e) {
                                            l();
                                        },
                                        error: function (o) {
                                            e("#corebiz-login-form-new-register").find(".msg--register").text("NÃ£o foi possÃ­vel fazer o cadastro em nossa loja. Favor verificar com o suporte!");
                                        },
                                    });
                                var l = function () {
                                    e.ajax({
                                        accept: "application/vnd.vtex.ds.v10+json",
                                        contentType: "application/json; charset=utf-8",
                                        crossDomain: !0,
                                        data: JSON.stringify(s),
                                        type: "PATCH",
                                        url: "/api/dataentities/AD/documents",
                                        success: function (e) {
                                            a("#corebiz-login-form-login"), p.success("Cadastro realizado com sucesso!");
                                        },
                                        error: function (o) {
                                            e("#corebiz-login-form-new-register").find(".msg--register").text("NÃ£o foi possÃ­vel fazer o cadastro em nossa loja. Favor verificar com o suporte!");
                                        },
                                    });
                                };
                            } else
                                a("#corebiz-login-form-code-confirmation", "code-confirmation-create-account-password-new"),
                                    p.error("Houve um erro, por favor verifique se o cÃ³digo enviado na sua caixa de email estÃ¡ correto!"),
                                    e("#corebiz-login-form-password-new").find("input[type=password]").val(""),
                                    i.pageClear();
                            x.hideLoading();
                        },
                        "POST"
                    ),
                    null
                );
            },
            pageClear: function () {
                p.clear(), e("#corebiz-login-form-password-new").find("input[type=password]").removeClass("password-error").removeClass("password-ok");
            },
            passwordValidate: function (e) {
                var o = { error: !1 };
                if (e.length < 8) (o.isValid = !1), (o.error = "Sua senha deve ter no mÃ­nimo de 8 caracteres");
                else {
                    var i = /[0-9]/g;
                    i.test(e)
                        ? (i = /[a-z]/g).test(e)
                            ? (i = /[A-Z]/g).test(e)
                                ? (o.isValid = !0)
                                : ((o.isValid = !1), (o.error = "Sua senha deve ter no mÃ­nimo 1 letra maiÃºscula"))
                            : ((o.isValid = !1), (o.error = "Sua senha deve ter no mÃ­nimo 1 letra minÃºscula"))
                        : ((o.isValid = !1), (o.error = "Sua senha deve ter no mÃ­nimo 1 nÃºmero"));
                }
                return o;
            },
            events: function () {
                var o = this;
                return (
                    e("body").on("submit", this.selectorForm, function (i) {
                        i.preventDefault();
                        var n = e(this).find("input[name=pass]"),
                            t = e(this).find("input[name=pass_conf]");
                        if (!n.val() && !t.val()) return p.warning("Por favor digite sua senha!"), !1;
                        if (n.val() != t.val()) return p.warning("As senhas sÃ£o diferentes!"), !1;
                        var a = o.passwordValidate(n.val());
                        if (a.error) return p.warning(a.error), !1;
                        x.showLoading(), o.changePswd({ login: window.email, newPassword: n.val(), accesskey: window.accesskey, authenticationToken: encodeURIComponent(window.authenticationToken) });
                    }),
                    e("body").on("blur", this.selectorForm + " input[name=pass]", function () {
                        var i = e(this);
                        i.removeClass("password-error").removeClass("password-ok");
                        var n = o.passwordValidate(i.val());
                        n.isValid ? i.addClass("password-ok") : (i.addClass("password-error"), p.error(n.error));
                    }),
                    e("body").on("blur", this.selectorForm + " input[name=pass_conf]", function () {
                        var i = e(this);
                        i.removeClass("password-error").removeClass("password-ok");
                        var n = o.passwordValidate(i.val());
                        n.isValid
                            ? i.val() === i.parents("form").find("input[name=pass]").val()
                                ? i.addClass("password-ok")
                                : (i.addClass("password-error"), p.error("A senha de confirmaÃ§Ã£o estÃ¡ diferente"))
                            : (i.addClass("password-error"), p.error(n.error));
                    }),
                    e("body").on("focus", this.selectorForm + " input[type=password]", function () {
                        e(this).removeClass("password-error").removeClass("password-ok"), p.clear();
                    }),
                    null
                );
            },
            init: function () {
                return this.events(), r(this.html), null;
            },
        },
        w = {
            selectorForm: "#corebiz-login-form-new-register",
            html:
                '<form action="#" id="corebiz-login-form-new-register" class="corebiz-vtex-login-form step-one corebiz-login-form"><div class="heading">Crie sua conta</div><div class="left form-geral step-one"><div class="field-row-full"><label for="email">E-mail</label><input type="email" name="email" placeholder="Digite seu email" required /></div><div class="field-row"><div class="group_inputs"><label for="cep">CEP</label><input type="text" id="cep" name="cep" placeholder="Digite o CEP" required/></div><div class="group_inputs"><label for="address">EndereÃ§o</label><input type="text" name="address" required/></div><div class="group_inputs"><label for="number">NÃºmero</label><input type="text" name="number_address" required/></div></div><div class="field-row"><div class="group_inputs"><label for="address">Bairro</label><input type="text" name="neighborhood" required /></div><div class="group_inputs"><label for="number">Cidade</label><input type="text" name="city" required /></div><div class="group_inputs"><label for="address">Estado</label><select name="uf"><option value="AC">Acre</option><option value="AL">Alagoas</option><option value="AP">AmapÃ¡</option><option value="AM">Amazonas</option><option value="BA">Bahia</option><option value="CE">CearÃ¡</option><option value="DF">Distrito Federal</option><option value="ES">EspÃ­rito Santo</option><option value="GO">GoiÃ¡s</option><option value="MA">MaranhÃ£o</option><option value="MT">Mato Grosso</option><option value="MS">Mato Grosso do Sul</option><option value="MG">Minas Gerais</option><option value="PA">ParÃ¡</option><option value="PB">ParaÃ­ba</option><option value="PR">ParanÃ¡</option><option value="PE">Pernambuco</option><option value="PI">PiauÃ­</option><option value="RJ">Rio de Janeiro</option><option value="RN">Rio Grande do Norte</option><option value="RS">Rio Grande do Sul</option><option value="RO">RondÃ´nia</option><option value="RR">Roraima</option><option value="SC">Santa Catarina</option><option value="SP">SÃ£o Paulo</option><option value="SE">Sergipe</option><option value="TO">Tocantins</option></select></div></div></div><div class="action-form-step"><a href="#corebiz-login-form-login" class="form-show btn_back_login">Voltar</a><input type="submit" class="btn_form_register" value="Registrar" /></div></form>',
            sendAccessKey: function (e, o) {
                return (
                    l(
                        "/pub/authentication/accesskey/send",
                        e,
                        function (e) {
                            o(e);
                        },
                        "POST"
                    ),
                    null
                );
            },
            callbackSendAccessKey: function () {
                return x.hideLoading(), a("#corebiz-login-form-code-confirmation", "code-confirmation-create-account-password-new"), null;
            },
            getAddressCompany: function () {
                e("input[name=cep]").blur(function () {
                    var o = e(this)
                        .val()
                        .replace(/[^0-9]/, "");
                    if (o) {
                        var i = "https://viacep.com.br/ws/" + o + "/json/";
                        e.ajax({
                            url: i,
                            dataType: "json",
                            crossDomain: !0,
                            contentType: "application/json",
                            success: function (o) {
                                o.logradouro && (e("input[name=address]").val(o.logradouro), e("input[name=city]").val(o.bairro), e("input[name=neighborhood]").val(o.localidade), e("select[name=uf]").val(o.uf));
                            },
                        });
                    }
                });
            },
            events: function () {
                var o = this;
                return (
                    e("body").on("submit", this.selectorForm, function (i) {
                        i.preventDefault(), e("form#corebiz-login-form-new-register").removeClass("step-two"), e("form#corebiz-login-form-new-register").addClass("step-three");
                        var n = e(this).find("input[name=email]").val();
                        (window.email = n), x.showLoading(), o.sendAccessKey({ email: n, authenticationToken: encodeURIComponent(window.authenticationToken) }, o.callbackSendAccessKey);
                    }),
                    null
                );
            },
            init: function () {
                return e("#cep").mask("99.999-999"), this.events(), r(this.html), this.getAddressCompany(), null;
            },
        },
        y = {
            selectorForm: "#corebiz-login-form-register",
            html:
                '<form action="#" id="corebiz-login-form-register" class="corebiz-vtex-login-form corebiz-login-form"><div class="heading">Crie sua conta</div><div class="left form-geral"><label for="email">Seu email</label> <br /><input type="email" name="email" placeholder="Digite seu email" required /> <br /><input type="submit" value="Continuar" /></div><div class="right social-geral"><div class="connect">Entre com seu</div><a href="#corebiz-login-form-login" class="email-senha form-show">Email e senha</a> <br /></div></form>',
            sendAccessKey: function (e, o) {
                return (
                    l(
                        "/pub/authentication/accesskey/send",
                        e,
                        function (e) {
                            o(e);
                        },
                        "POST"
                    ),
                    null
                );
            },
            callbackSendAccessKey: function () {
                return x.hideLoading(), a("#corebiz-login-form-code-confirmation", "code-confirmation-create-account-password-new"), null;
            },
            events: function () {
                var o = this;
                return (
                    e("body").on("submit", this.selectorForm, function (i) {
                        i.preventDefault();
                        var n = e(this).find("input[type=text]");
                        return n.val()
                            ? s(n.val())
                                ? ((window.email = n.val()), x.showLoading(), void o.sendAccessKey({ email: n.val(), authenticationToken: encodeURIComponent(window.authenticationToken) }, o.callbackSendAccessKey))
                                : (p.error("Email invalido!"), !1)
                            : (p.warning("Por favor digite seu email!"), !1);
                    }),
                    null
                );
            },
            init: function () {
                return this.events(), r(this.html), null;
            },
        },
        x = {
            setLoading: function () {
                return e(".vtex-corebiz-loading").length || e("#corebiz-vtex-login-bg, #corebiz-vtex-login-modal").find("form, .bx").append("<div class='vtex-corebiz-loading'><div>Por favor aguarde...</div></div>"), null;
            },
            showLoading: function () {
                return this.setLoading(), e(".vtex-corebiz-loading").fadeIn(250), null;
            },
            hideLoading: function () {
                return (
                    this.setLoading(),
                    setTimeout(function () {
                        e(".vtex-corebiz-loading").fadeOut(250);
                    }, 1e3),
                    null
                );
            },
            init: function () {
                return (
                    e("body").on("click", ".form-show", function (o) {
                        o.preventDefault();
                        var i = e(this).attr("href");
                        i && a(i);
                    }),
                    null
                );
            },
        },
        z = {
            selectorForm: "#corebiz-login-meus-pedidos",
            html:
                '<form action="#" id="corebiz-login-meus-pedidos" class="corebiz-vtex-login-form corebiz-login-form"><div class="heading">Acessar meus pedidos</div><div class="left form-geral"><label for="email">Seu email ou nÃºmero do pedido</label><br /><input type="text" name="text" placeholder="Digite seu email ou pedido" required /> <br /><input type="submit" value="Entrar" /></div><div class="right social-geral"><div class="connect">Entre com seu</div><a href="#corebiz-login-form-login" class="email-senha form-show">Email e senha</a> <br /></div></form>',
            events: function (o) {
                var i = this;
                return (
                    e("body").on("submit", this.selectorForm, function (n) {
                        n.preventDefault();
                        var t = e(this).find("input").val();
                        t.indexOf("@") > -1
                            ? s(t)
                                ? i.callbackemail(t, o)
                                : p.error("Email invÃ¡lido!")
                            : t.length > 8 && t.length < 17
                            ? i.callbacknumberPedido(t, o, function (o, i) {
                                  o && (i ? (A.info(i), a("#corebiz-login-form-orders-page"), e("#corebiz-login-form-orders-page").find(".form-show.default").hide()) : p.error("Pedido nÃ£o encontrado!"), x.hideLoading());
                              })
                            : p.error("Numero do pedido invÃ¡lido");
                    }),
                    e("body").on("click", ".shopping-cart-items.orders-list li a.btn-more-see-order", function () {
                        x.showLoading();
                        var n = e(this).attr("rel");
                        i.callbacknumberPedido(n, o, function (e, o) {
                            e && (o ? (A.info(o), a("#corebiz-login-form-orders-page")) : p.error("Pedido nÃ£o encontrado!"), x.hideLoading());
                        });
                    }),
                    null
                );
            },
            callbacknumberPedido: function (o, i, n) {
                var t = "function" == typeof n;
                return (
                    x.showLoading(),
                    e
                        .ajax({
                            url: window.location.protocol + "//" + window.location.host + "/api/oms/pvt/orders/" + o,
                            type: "GET",
                            headers: { Accept: "application/json; charset=utf-8", "Content-Type": "application/json", "x-vtex-api-appKey": i.vtexAppKey, "x-vtex-api-appToken": i.vtexApiAppToken },
                            dataType: "json",
                        })
                        .done(function (e) {
                            t && n(!0, e), x.hideLoading();
                        })
                        .error(function (e) {
                            p.error("Houve um erro, por favor tente novamente mais tarde!"), n(!1, e);
                        }),
                    null
                );
            },
            starStatusPedido: function (e) {
                return e;
            },
            callbackemail: function (o, n) {
                x.showLoading(),
                    e
                        .ajax({
                            url: window.location.protocol + "//" + window.location.host + "/api/oms/pvt/orders/?orderBy=creationDate,desc&q=" + o,
                            type: "GET",
                            headers: { Accept: "application/json; charset=utf-8", "Content-Type": "application/json", "x-vtex-api-appKey": n.vtexAppKey, "x-vtex-api-appToken": n.vtexApiAppToken },
                            dataType: "json",
                        })
                        .done(function (o) {
                            var n,
                                r = "";
                            if (!(o.list.length > 0)) return p.error("Pedidos nÃ£o encontrados"), x.hideLoading(), !1;
                            for (n = o.list.length > 10 ? 10 : o.list.length, i = 0; i < n; i++)
                                r +=
                                    '<li class="clearfix"><span class="item-name">Pedido: <b>' +
                                    o.list[i].orderId +
                                    "</b> compra realizada em " +
                                    t(o.list[i].creationDate) +
                                    '</span><span class="item-status">' +
                                    o.list[i].statusDescription +
                                    ' - <a href="#" rel="' +
                                    o.list[i].orderId +
                                    '" class="btn-more-see-order">Veja mais</a></span></li>';
                            a("#corebiz-login-form-orders-list"), e(".shopping-cart-items.orders-list").html(r), x.hideLoading();
                        })
                        .error(function () {
                            p.error("Houve um erro, por favor tente novamente mais tarde!"), x.hideLoading();
                        });
            },
            init: function (o) {
                return this.events(o), o.vtexAppKey && o.vtexAppKey ? r(this.html) : e(".connect, .btn-veja-seu-pedido").hide(), null;
            },
        },
        k = {
            selectorForm: "#corebiz-login-form-orders-list",
            html:
                '<div action="#" id="corebiz-login-form-orders-list" class="corebiz-vtex-login-form bx corebiz-login-form"><div class="heading">Meus pedidos (<a href="#" class="out-login">Sair</a>)</div><div class="form-geral"><div class="shopping-cart"><ul class="shopping-cart-items orders-list"></ul></div> \x3c!--end shopping-cart --\x3e</div></div>',
            events: function () {
                return null;
            },
            init: function () {
                return this.events(), r(this.html), null;
            },
        },
        A = {
            selectorForm: "#corebiz-login-form-orders-page",
            html:
                '<div id="corebiz-login-form-orders-page" class="corebiz-vtex-login-form bx corebiz-login-form"><div class="heading">Pedido (<a href="#" class="out-login">Sair</a>)</div><div class="form-geral"><div class="shopping-cart"><div class="order-info"></div><ul class="shopping-cart-items order-list"></ul></div> \x3c!--end shopping-cart --\x3e</div></div>',
            info: function (o) {
                for (var i = o.totals[2].value ? n(o.totals[2].value, 2, ",", ".", "R$") : "GrÃ¡tis", a = o.totals[2].value ? n(o.totals[2].value, 2, ",", ".", "R$") : "R$ 0,00", r = "", s = 0, l = 0; l < o.items.length; l++)
                    (s += o.items[l].price),
                        (r +=
                            '<td><img src="' +
                            o.items[l].imageUrl +
                            '" width="50px" height="50px" /></td><td>' +
                            o.items[l].name +
                            '<span class="qtd">Quantidade: ' +
                            o.items[l].quantity +
                            '</span></td><td align="center">' +
                            n(o.items[l].price, 2, ",", ".", "R$") +
                            "</td>");
                var c =
                    "<h1>Compra realizada em <b>" +
                    t(o.creationDate) +
                    '</b></h1><div class="bx-info left-bx"><h3>Pagamento</h3>' +
                    o.paymentData.transactions[0].payments[0].paymentSystemName +
                    '</div><div class="bx-info left-bx"><h3>Entrega</h3>' +
                    o.shippingData.address.street +
                    ", " +
                    o.shippingData.address.number +
                    "<br/>" +
                    o.shippingData.address.city +
                    "/\t" +
                    o.shippingData.address.state +
                    "-" +
                    o.shippingData.address.country +
                    "<br />" +
                    o.shippingData.address.postalCode +
                    '</div><div style="clear:both"></div><h2>Pedido: <span>' +
                    o.orderId +
                    "</span></h2><p><b>Transportadora:</b> " +
                    o.shippingData.logisticsInfo[0].deliveryCompany +
                    " em atÃ© " +
                    parseInt(o.shippingData.logisticsInfo[0].shippingEstimate) +
                    " dias</p><p><b>Status:</b> " +
                    z.starStatusPedido(o.statusDescription) +
                    '</p><div class="product-list"><table class="table-product-list"><tr><th width="10%"></th><th>Nome</th><th align="center" width="15%">Valor</th></tr><tr>' +
                    r +
                    '</tr></table><div style="clear:both"></div><table class="table-total"><tr><td>Sub-Total</td><td align="right">' +
                    n(s, 2, ",", ".", "R$") +
                    '</td></tr><tr><td>Frete</td><td align="right">' +
                    i +
                    '</td></tr><tr><td>Desconto</td><td align="right">' +
                    a +
                    '</td></tr><tr><td>Total</td><td align="right">' +
                    n(o.totals[0].value, 2, ",", ".", "R$") +
                    '</td></tr></table><div style="clear:both"></div><p><a href="#corebiz-login-form-orders-list" class="form-show default">< Voltar para a tela dos seus pedidos</a></p></div>';
                return e("#corebiz-login-form-orders-page .order-info").html(c), null;
            },
            events: function () {
                return (
                    e("body").on("click", "a.out-login", function (e) {
                        e.preventDefault(), window.location.reload();
                    }),
                    null
                );
            },
            init: function () {
                return this.events(), r(this.html), null;
            },
        };
    (e.fn.corebizVtexLogin = function (o) {
        (o = e.extend(e.fn.corebizVtexLogin.parametersDefaults, o)),
            f.init(o),
            m.init(o),
            h.init(),
            g.init(),
            b.init(),
            y.init(),
            w.init(),
            z.init(o),
            k.init(),
            A.init(),
            v.init(),
            x.init(),
            m.verifyLogin(function (o) {
                o &&
                    (e("form.corebiz-login-form").addClass("logado"),
                    e("form.corebiz-login-form").html("<div class='heading'>Acesse sua conta</div><p style='text-align: center'>VocÃª jÃ¡ esta logado! | <a href='/no-cache/user/logout'>SAIR</a></p>"));
            }),
            o.modalOpen && o.active && f.openModal();
    }),
        (e.fn.corebizVtexLoginOpenModal = function () {
            f.openModal();
        }),
        (e.fn.corebizVtexLoginAuth = function (e, o, i) {
            if ((console.warn("email, pass", e, o), e || o)) {
                var n = { login: e, authenticationToken: encodeURIComponent(window.authenticationToken), password: o };
                m.auth(n, i);
            }
        }),
        (e.fn.corebizVtexLogin.parametersDefaults = {
            scope: location.host.indexOf("vtexcommercestable") > -1 ? location.host.split(".")[0] : location.host,
            redirectAfterUserLoggin: "/account",
            reloadAfterUserLoggin: !1,
            modalOpen: !1,
            active: !0,
            "x-vtex-api-appKey": !1,
            "x-vtex-api-appToken": !1,
        });
})($);
var homologacao = !0;
homologacao &&
    $(homologacao).ready(function () {
        "use strict";
        $("body").corebizVtexLogin({ scope: "tfbki4", redirectAfterUserLoggin: "/account", modalOpen: !0, active: !0, vtexAppKey: "", vtexApiAppToken: "" });
    });
